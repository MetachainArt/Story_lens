# Story Lens 사용자 흐름 (User Flow)

## 개요

Story Lens는 장애인을 위한 사진 편집 웹 앱입니다. 이 문서는 주요 사용자 흐름, 화면 연결, 에러 처리를 정의합니다.

---

## 1. 전체 흐름도 (ASCII Art)

```
┌─────────────────────────────────────────────────────────────────┐
│                    Story Lens 사용자 흐름도                        │
└─────────────────────────────────────────────────────────────────┘

                         ┌─────────────┐
                         │  로그인 화면  │
                         └──────┬──────┘
                                │
                    ┌───────────┼───────────┐
                    │                       │
              일반 사용자                선생님
                    │                       │
                    ▼                       ▼
           ┌─────────────────┐      ┌──────────────┐
           │   홈 화면 (사용자)  │      │ 선생님 대시보드 │
           └────────┬────────┘      └──────┬───────┘
                    │                      │
          ┌─────────┼─────────┐       [계정 관리]
          │                   │
       사진 찍기            내 사진
          │                   │
          ▼                   ▼
    ┌──────────────┐   ┌──────────────┐
    │ 카메라 화면   │   │ 사진 목록 화면 │
    │(여러장 촬영)  │   │ (격자 갤러리)  │
    └──────┬───────┘   └──────┬───────┘
           │                   │
           └─────────┬─────────┘
                     │
          ┌──────────▼──────────┐
          │ 사진 선택 화면       │
          │(크게 스와이프 확인)  │
          └──────────┬──────────┘
                     │
                이 사진 편집
                     │
                     ▼
          ┌──────────────────┐
          │  편집 화면        │
          │(필터/조절/자르기) │
          └──────────┬───────┘
                     │
                   저장
                     │
                     ▼
          ┌──────────────────┐
          │ 저장 완료 화면     │
          │(미리보기 확인)    │
          └────┬──────────┬──┘
               │          │
            홈으로    다시 편집
               │          │
               ▼          │
          ┌─────────┐     │
          │ 홈 화면  │◄────┘
          └─────────┘
```

---

## 2. Flow 1: 사진 촬영 → 편집 → 저장

### 단계별 상세 설명

#### Step 1: 로그인 화면 → 사용자 로그인
- **화면명**: 로그인 화면
- **진입 방식**: 앱 최초 실행 또는 세션 만료 후
- **UI 요소**:
  - 이메일 입력 필드
  - 비밀번호 입력 필드
  - 로그인 큰 버튼 (터치/클릭 용이)
  - 선택: 비밀번호 찾기 링크
- **액션**: 로그인 버튼 클릭
- **출장 화면**: 홈 화면 (로그인 성공 시)

#### Step 2: 홈 화면 → '사진 찍기' 버튼 클릭
- **화면명**: 홈 화면 (사용자)
- **UI 요소**:
  - 큰 '사진 찍기' 버튼 (화면 중앙)
  - '내 사진' 버튼 (이전 작업 접근)
  - 사용자 정보 표시 (이름, 프로필)
  - 로그아웃 버튼
- **액션**: '사진 찍기' 버튼 클릭
- **출장 화면**: 카메라 화면

#### Step 3: 카메라 화면 → 여러 장 촬영
- **화면명**: 카메라 화면
- **UI 요소**:
  - 카메라 프리뷰 (전체 화면)
  - 촬영 버튼 (중앙 하단, 크고 명확)
  - 플래시 ON/OFF 토글
  - 촬영한 사진 미리보기 (하단 스트립)
  - '찍기 끝' 버튼 (좌하단 또는 상단)
- **액션**: 촬영 버튼 여러 번 클릭 → '찍기 끝' 클릭
- **출장 화면**: 사진 선택 화면

#### Step 4: 사진 선택 화면 → 크게 스와이프하며 확인
- **화면명**: 사진 선택 화면
- **UI 요소**:
  - 선택된 사진 큼직하게 표시 (화면 상단 70%)
  - 하단에 촬영된 사진들 썸네일 (가로 스크롤)
  - 선택된 사진 정보 (촬영 시간)
  - '이 사진 편집' 큰 버튼
  - '다시 촬영' 버튼 (카메라로 돌아가기)
- **액션**: 스와이프로 사진 선택 → '이 사진 편집' 클릭
- **출장 화면**: 편집 화면

#### Step 5: 편집 화면 → 보정 작업
- **화면명**: 편집 화면
- **UI 요소**:
  - 편집 중인 사진 (상단 60%)
  - 3개 탭: '필터', '조절', '자르기'
  - 각 탭별 조절 슬라이더
  - 실시간 미리보기
  - '저장' 버튼 (하단)
  - '취소' 버튼 (작은 버튼)
- **액션**: 탭 선택 → 슬라이더 조절 → '저장' 클릭
- **출장 화면**: 저장 완료 화면

#### Step 6: 저장 완료 화면 → 확인 및 다음 액션
- **화면명**: 저장 완료 화면
- **UI 요소**:
  - 최종 사진 미리보기 (크게)
  - "저장되었습니다!" 메시지
  - 편집 정보 (필터명, 조절값)
  - '홈으로' 버튼 (왼쪽)
  - '다시 편집' 버튼 (오른쪽)
- **액션**: '홈으로' 또는 '다시 편집' 클릭
- **출장 화면**: 홈 화면 또는 편집 화면

---

## 3. Flow 2: 기존 사진 재편집

### 상세 설명

#### Step 1: 홈 화면 → '내 사진' 버튼 클릭
- **진입점**: 사용자가 홈 화면에서 '내 사진' 버튼 클릭

#### Step 2: 사진 목록 화면 → 사진 선택
- **화면명**: 사진 목록 화면 (갤러리)
- **UI 요소**:
  - 3x2 또는 4x3 격자 갤러리
  - 각 사진 썸네일 (크고 터치하기 쉬움)
  - 촬영 날짜/시간 표시
  - 스크롤 (세로)
  - 상단에 뒤로가기 버튼
- **액션**: 사진 선택 (터치)
- **출장 화면**: 편집 화면 (선택된 사진)

#### Step 3: 편집 화면 → 보정 → 저장
- **Flow 1의 Step 5와 동일**

---

## 4. Flow 3: 선생님 계정 관리

### 상세 설명

#### Step 1: 선생님 로그인
- **화면명**: 로그인 화면
- **선생님 계정 식별**: 이메일 패턴 (teacher@school.com) 또는 계정 권한
- **출장 화면**: 선생님 대시보드

#### Step 2: 선생님 대시보드 → 계정 관리
- **화면명**: 선생님 대시보드
- **UI 요소**:
  - '학생 계정 생성' 버튼
  - '학생 목록' (이름, 로그인 상태, 편집)
  - 각 학생 계정 관리 (비밀번호 재설정, 삭제)
  - '통계' (학생별 사진 수)
  - 로그아웃 버튼
- **액션**: '학생 계정 생성' → 학생명/초기 비밀번호 입력 → 계정 생성

---

## 5. 화면 연결 맵 (Screen Map)

```
┌─────────────────────────────────────────────────────────────┐
│                        화면 네비게이션                          │
└─────────────────────────────────────────────────────────────┘

로그인 화면
  ├─ 로그인 성공 (일반) ──→ 홈 화면 (사용자)
  └─ 로그인 성공 (선생님) ──→ 선생님 대시보드

홈 화면 (사용자)
  ├─ '사진 찍기' ──→ 카메라 화면
  ├─ '내 사진' ──→ 사진 목록 화면
  └─ 로그아웃 ──→ 로그인 화면

카메라 화면
  ├─ '찍기 끝' ──→ 사진 선택 화면
  └─ 뒤로가기 ──→ 홈 화면

사진 선택 화면
  ├─ '이 사진 편집' ──→ 편집 화면
  ├─ '다시 촬영' ──→ 카메라 화면
  └─ 뒤로가기 ──→ 홈 화면

사진 목록 화면 (갤러리)
  ├─ 사진 선택 ──→ 편집 화면
  └─ 뒤로가기 ──→ 홈 화면

편집 화면
  ├─ '저장' ──→ 저장 완료 화면
  ├─ '취소' ──→ 뒤로가기 (사진 선택 또는 목록)
  └─ 뒤로가기 ──→ 뒤로가기

저장 완료 화면
  ├─ '홈으로' ──→ 홈 화면
  └─ '다시 편집' ──→ 편집 화면 (같은 사진)

선생님 대시보드
  ├─ '학생 계정 생성' ──→ 계정 생성 화면
  ├─ 학생 선택 ──→ 학생 상세 화면
  └─ 로그아웃 ──→ 로그인 화면
```

---

## 6. 각 화면 상세 명세

### 6.1 로그인 화면

| 속성 | 상세 |
|------|------|
| **진입점** | 앱 최초 실행, 세션 만료 후 |
| **종료점** | 홈 화면 (사용자/선생님 구분) |
| **UI 요소** | 이메일, 비밀번호 입력 필드, 로그인 버튼 |
| **진입 조건** | 없음 |
| **퇴장 조건** | 로그인 성공 |
| **에러 처리** | 로그인 실패 → 에러 메시지 → 재입력 |

### 6.2 홈 화면 (사용자)

| 속성 | 상세 |
|------|------|
| **진입점** | 로그인 성공, 저장 완료 후 '홈으로' |
| **종료점** | 카메라, 사진 목록, 로그인 화면 |
| **UI 요소** | '사진 찍기' 버튼, '내 사진' 버튼, 사용자명, 로그아웃 |
| **진입 조건** | 로그인 상태 유지 |
| **퇴장 조건** | 버튼 클릭 |

### 6.3 카메라 화면

| 속성 | 상세 |
|------|------|
| **진입점** | 홈 화면에서 '사진 찍기' |
| **종료점** | 사진 선택 화면, 홈 화면 |
| **UI 요소** | 카메라 프리뷰, 촬영 버튼, 플래시 토글, 찍기 끝 버튼 |
| **진입 조건** | 카메라 권한 허용 |
| **퇴장 조건** | '찍기 끝' 또는 뒤로가기 |

### 6.4 사진 선택 화면

| 속성 | 상세 |
|------|------|
| **진입점** | 카메라 화면에서 '찍기 끝' |
| **종료점** | 편집 화면, 카메라 화면 |
| **UI 요소** | 큰 사진 표시, 썸네일 스트립, '이 사진 편집' 버튼 |
| **진입 조건** | 촬영된 사진 최소 1장 |
| **퇴장 조건** | 사진 선택 및 '이 사진 편집' 클릭 |

### 6.5 편집 화면

| 속성 | 상세 |
|------|------|
| **진입점** | 사진 선택 화면, 사진 목록 화면에서 사진 선택 |
| **종료점** | 저장 완료 화면, 뒤로가기 |
| **UI 요소** | 사진, 필터/조절/자르기 탭, 슬라이더, 미리보기 |
| **진입 조건** | 사진 선택 완료 |
| **퇴장 조건** | '저장' 또는 '취소' |

### 6.6 저장 완료 화면

| 속성 | 상세 |
|------|------|
| **진입점** | 편집 화면에서 '저장' |
| **종료점** | 홈 화면, 편집 화면 |
| **UI 요소** | 최종 사진, 완료 메시지, '홈으로', '다시 편집' 버튼 |
| **진입 조건** | 저장 성공 |
| **퇴장 조건** | 버튼 클릭 |

### 6.7 사진 목록 화면 (갤러리)

| 속성 | 상세 |
|------|------|
| **진입점** | 홈 화면에서 '내 사진' |
| **종료점** | 편집 화면, 홈 화면 |
| **UI 요소** | 격자 갤러리, 썸네일, 날짜 표시 |
| **진입 조건** | 저장된 사진 존재 |
| **퇴장 조건** | 사진 선택 또는 뒤로가기 |

---

## 7. 에러 처리 흐름 (Error Handling)

### 7.1 카메라 권한 거부

```
카메라 화면 진입 시도
    │
    ├─ 권한 허용됨 ──→ 정상 진행
    │
    └─ 권한 거부됨
        │
        ▼
    에러 팝업 ("카메라 접근 권한이 필요합니다")
        │
        ├─ '설정으로 이동' ──→ 브라우저 설정 열기
        │
        └─ '취소' ──→ 홈 화면으로 돌아가기
```

### 7.2 로그인 실패

```
로그인 버튼 클릭
    │
    ▼
계정 확인
    │
    ├─ 계정 존재 & 비밀번호 정확 ──→ 로그인 성공
    │
    └─ 계정 없음 또는 비밀번호 오류
        │
        ▼
    에러 메시지 표시
    ("이메일 또는 비밀번호가 틀렸습니다")
        │
        ▼
    재입력 요청
```

### 7.3 사진 촬영 중 문제

```
촬영 시도
    │
    ├─ 저장소 용량 부족
    │   │
    │   ▼
    │   에러 알림 ("저장소 공간이 부족합니다")
    │   │
    │   └─ 뒤로가기 (촬영 불가)
    │
    ├─ 카메라 오류
    │   │
    │   ▼
    │   에러 알림 ("카메라 오류가 발생했습니다")
    │   │
    │   └─ 뒤로가기
    │
    └─ 촬영 성공 ──→ 계속 진행
```

### 7.4 저장 실패

```
편집 화면에서 '저장' 클릭
    │
    ▼
서버 저장 시도
    │
    ├─ 네트워크 오류
    │   │
    │   ▼
    │   에러 메시지 ("네트워크 연결을 확인해주세요")
    │   │
    │   └─ '재시도' 또는 '취소' 버튼
    │
    ├─ 서버 오류
    │   │
    │   ▼
    │   에러 메시지 ("저장에 실패했습니다. 다시 시도해주세요")
    │   │
    │   └─ '재시도' 버튼
    │
    └─ 저장 성공 ──→ 저장 완료 화면
```

---

## 8. 엣지 케이스 (Edge Cases)

### 8.1 촬영된 사진 없음

**시나리오**: 사용자가 카메라에서 '찍기 끝'을 클릭했으나 실제로는 사진을 촬영하지 않음

**처리 방식**:
- 사진 선택 화면으로 진입 불가
- 경고 팝업: "촬영된 사진이 없습니다"
- '다시 촬영' 버튼으로 카메라 화면 재진입

### 8.2 저장된 사진 없음

**시나리오**: 사용자가 '내 사진' 버튼을 클릭했으나 이전 편집 결과가 없음

**처리 방식**:
- 사진 목록 화면에 메시지 표시: "저장된 사진이 없습니다"
- '사진 찍기' 버튼 제공 (홈 화면으로 링크)

### 8.3 앱 중단 후 복구

**시나리오**: 편집 중 앱이 갑자기 종료됨

**처리 방식**:
- 로그인 화면으로 돌아감
- 재로그인 후 홈 화면 진입
- 편집 중이던 사진은 서버에 임시 저장되지 않음 (사용자에게 알림)

### 8.4 네트워크 불안정

**시나리오**: 저장 중 네트워크 연결이 끊어짐

**처리 방식**:
- 저장 중 표시 ("저장 중...")
- 실패 시 팝업: "네트워크 연결을 확인해주세요"
- '재시도' 및 '취소' 버튼 제공

### 8.5 동일 기기 여러 사용자

**시나리오**: 한 기기에서 여러 학생이 교대로 사용

**처리 방식**:
- 각 사용자는 독립적인 로그인 필요
- 로그아웃 후 다음 사용자가 로그인
- 세션 타임아웃 설정 (30분 비활성 후 자동 로그아웃)

### 8.6 대용량 사진 처리

**시나리오**: 고해상도 사진 촬영 후 편집 시 성능 저하

**처리 방식**:
- 편집 화면에서 압축된 미리보기로 표시
- 저장 시 원본 사진 다운샘플링
- 용량 경고 메시지 (예: "이 사진은 5MB입니다")

### 8.7 동시 편집 시도

**시나리오**: 같은 사진을 두 개의 브라우저 탭에서 동시에 편집

**처리 방식**:
- 마지막 저장이 우선 (Last-Write-Wins)
- 저장 완료 화면에서 "이 버전이 서버에 저장되었습니다" 표시

---

## 9. 접근성 고려 사항

### 9.1 터치 반응성
- 모든 버튼 최소 크기: 48x48px
- 버튼 간 최소 간격: 16px
- 반응 시간: 200ms 이내

### 9.2 시각 접근성
- 텍스트 대비도: WCAG AA 기준 (4.5:1 이상)
- 폰트 크기: 최소 16px
- 색깔에만 의존하지 않음 (아이콘/텍스트 함께 사용)

### 9.3 청각 접근성
- 알림 음성: 자막/진동 함께 제공
- 동영상: 자막 포함

### 9.4 모터 접근성
- 스와이프 외 대체 방법 제공 (버튼 클릭)
- 긴 누르기 대신 더블 탭 또는 버튼 사용

---

## 10. 사용자 세션 관리

### 10.1 로그인 유지 기간
- 모바일: 7일
- 데스크톱: 30일
- 선생님 계정: 12시간 (보안)

### 10.2 비활성 타임아웃
- 30분 이상 활동 없으면 자동 로그아웃
- 경고 메시지: "30초 후 로그아웃됩니다"

### 10.3 로그아웃 시 처리
- 모든 임시 데이터 제거
- 로그인 화면 이동

---

## 11. 성능 및 로딩 시간

| 화면 | 목표 로딩 시간 | 비고 |
|------|--------------|------|
| 로그인 → 홈 | < 2초 | 네트워크 의존 |
| 홈 → 카메라 | < 1초 | 카메라 초기화 포함 |
| 카메라 → 사진 선택 | < 2초 | 사진 처리 |
| 편집 화면 로딩 | < 1.5초 | 미리보기 생성 |
| 저장 | < 3초 | 네트워크 의존 |
| 갤러리 로딩 | < 2초 | 썸네일 생성 |

---

## 12. 향후 개선 사항

- [ ] 오프라인 모드 지원
- [ ] 협업 편집 (선생님과 학생 함께)
- [ ] AI 기반 자동 보정
- [ ] 음성 명령 지원
- [ ] 고급 편집 도구 (레이어, 텍스트 추가)

---

**작성일**: 2026-02-06
**버전**: 1.0
**상태**: 초안
